## 填报人角色填报资金需求

### 操作流程

#### 单个子项目填报
- 点击资金需求预测填报子项目列表待提交项目板块对应子项目的“填报”按钮
- 输入下个月的资金需求预测金额和备注信息
- 点击保存按钮保存信息
- 点击提交按钮提交填报信息

#### 多个子项目填报
- 勾选资金需求预测填报子项目列表待提交项目板块的多个子项目，点击“批量填报”按钮
- 输入每个子项目下个月的资金需求预测金额和备注信息
- 点击保存按钮保存信息
- 点击提交按钮提交填报信息

#### 单个子项目撤回
- 填报人点击资金需求预测的提交历史按钮
- 在提交历史页面，找到需要撤回子项目提交历史记录，点击历史记录，在历史记录弹窗中点击申请撤回按钮
- 点击提示框的确认撤回，发起撤回请求

#### 撤回子项目重新填写提交
- 点击资金需求预测填报子项目列表已撤回项目板块对应子项目的“填报”按钮
- 重新修改对应记录的资金需求预测金额和备注信息
- 点击保存按钮保存信息
- 点击提交按钮提交填报信息

### 界面展示

#### 页面结构
- 资金需求预测填报项目列表页面
  - 需求填报页面
  - 提交历史页面
  - 撤回项目重新填报页面

#### 资金需求预测填报项目列表页面描述
- 标题：资金需求预测填报
- 提交历史按钮：在页面右上方，点击进入提交历史页面
- 待提交项目板块
    - 筛选器
        - 标题：筛选条件
        - 筛选项：机构、部门、项目分类、项目名称、子项目、资金需求类型、状态
        - 功能描述：筛选结果实时展示
    - 子项目列表
        - 表格按机构、部门、项目分类和项目名称进行分组展示
        - 表头包含
            - 子项目
            - 需求类型
            - 预测月份：当前月份+1
            - 状态：获取PredictRecord表status字段，预测月份没有记录默认展示 UNFILLED
            - 备注：获取PredictRecord表remark字段，预测月份没有记录默认展示为 -
            - 操作：根据PredictRecord表status字段展示，预测月份没有记录或status字段为 “UNFILLED” 展示 “填报” 按钮 ，status字段为 “DRAFT”  同时展示 “填报”和“提交” 按钮 ，status字段为其他值则不展示任何按钮
        - 默认展示填报人所属机构的全部子项目
        - 批量操作按钮：可以多选子项目然后点击批量填报按钮进行批量填报，只有所选的所有的项目可以都填报的时候才激活按钮
        - 列表样式示例：
            ## 机构A
            ### 部门1
            #### 项目分类1
            ##### 项目1

            | 子项目 | 资金需求类型 | 预测月份 | 状态 | 备注 | 操作 | 
            |--------|------------|------------|----------------|----------------|----------------|
            | 子项目1 | 设备采购 | 2025-04 | 未填写 | 综合客运枢纽/滨海港铁路支线专项债利息/阜溧高速 | 填报 |
            | 子项目1 | 工程款 | 2025-04 | 已提交 | 项目资本金6.85亿，已付58465万元。 | - |
            | 子项目2 | 材料费 | 2025-04| 草稿 | 实际需求资金按土地出让金的25%考虑（即刚性计提及有关税费）。 | 填报/提交 |

            ##### 项目2

            | 子项目 | 资金需求类型 | 预测月份 | 状态 | 备注 | 操作 | 2024-04 (可填报) |
            |--------|------------|------------|----------------|----------------|----------------|
            | 子项目1 | 人工费 | 2025-04| 草稿 | 根据协议支付。 | 填报/提交 |
            | 子项目2 | 设备采购 | 2025-04 | 草稿 | 财政安排5000万资金 | 填报/提交 |

            #### 项目分类2
            ##### 项目3

            | 子项目 | 资金需求类型 | 预测月份 | 状态 | 备注 | 操作 | 
            |--------|------------|------------|----------------|----------------|----------------|
            | 子项目1 | 设备采购 | 2025-04 | 未填写 | 综合客运枢纽/滨海港铁路支线专项债利息/阜溧高速 | 填报 |
            | 子项目1 | 工程款 | 2025-04 | 已提交 | 项目资本金6.85亿，已付58465万元。 | - |
            | 子项目2 | 材料费 | 2025-04| 草稿 | 实际需求资金按土地出让金的25%考虑（即刚性计提及有关税费）。 | 填报/提交 |

            #### 项目4

            | 子项目 | 资金需求类型 | 预测月份 | 状态 | 备注 | 操作 | 2024-04 (可填报) |
            |--------|------------|------------|----------------|----------------|----------------|
            | 子项目1 | 人工费 | 2025-04| 草稿 | 根据协议支付。 | 填报/提交 |
            | 子项目2 | 设备采购 | 2025-04 | 草稿 | 财政安排5000万资金 | 填报/提交 |

            ### 部门2
            #### 项目分类2
            ##### 项目3

            | 子项目 | 资金需求类型 | 预测月份 | 状态 | 备注 | 操作 | 2024-04 (可填报) |
            |--------|------------|------------|----------------|----------------|----------------|
            | 子项目1 | 工程款 | 2025-04 | 未填写 | 黄海农场民生加油站留5%保证金 | 填报 |
            | 子项目2 | 材料费 | 2025-04 | 已提交 | 青年路高架主线部分回购款 | - |

- 待提交项目板块
    - 表格按机构、部门、项目分类和项目名称进行分组展示
    - 表头包含
            - 子项目
            - 需求类型
            - 填报月份：撤回记录月份
            - 状态：获取PredictRecord表status字段
            - 审核备注：获取对应AuditRecord表remark字段记录，没有记录默认展示为 -
            - 操作：根据PredictRecord表status字段展示，记录或status字段为 “APPROVED” 展示 “填报” 按钮 ，status字段为 “REJECTED” 展示 “再次提交撤回申请按钮”和“取消撤回申请”按钮 ，status字段为 “PENDING_WITHDRAWAL” 显示“取消撤回申请”按钮
    - 仅展示PredictRecord表status字段为“APPROVED”，“REJECTED”和“PENDING_WITHDRAWAL”的记录

#### 提交历史页面描述
- 标题：资金需求预测提交历史
- 返回按钮：点击按钮返回资金需求预测填报项目列表页面
- 筛选器
    - 标题：筛选条件
    - 筛选项：机构、部门、项目分类、项目名称、子项目、资金需求类型、年、月
    - 功能描述：筛选结果实时展示
- 子项目列表
    - 表格按机构、部门、项目分类和项目名称进行分组展示
    - 表头包含
        - 子项目
        - 需求类型
        - 默认展示最近12个月的提交需求预测金额
    - 仅展示填报人本人的填报记录
    - 点击记录单元格展示对应记录的填报信息弹窗，包括所属年月、预测金额、备注、上次提交日期、撤回按钮（默认仅能撤回最近3个月的记录，管理员可以在系统设置设置可以撤回的时间区间，比如最近4个月或者5个月）、关闭按钮
    - 列表样式示例：
            ## 机构A
            ### 部门1
            #### 项目分类1
            ##### 项目1

            | 子项目 | 资金需求类型 | 2024年1月 | 2024年2月 | 2024年3月 | 2024年4月 | 2024年5月 | 2024年6月 | 
            |--------|---------|---------|---------|---------|---------|---------|---------|
            | 子项目1 | 设备采购 | ¥3,000,000  | ¥3,000,000  | ¥3,000,000  | ¥3,000,000  | ¥3,000,000  | ¥3,000,000  |

#### 需求填报页面     
- 标题：资金需求预测填报
- 返回按钮：点击按钮返回资金需求预测填报项目列表页面
- 保存、提交按钮
- 子项目列表
    - 表格按机构、部门、项目分类和项目名称进行分组展示
    - 表头包含
        - 子项目
        - 资金需求类型
        - 年度汇总数据
        - 前3个月历史数据（不可编辑）
        - 下月数据（可填报）
        - 备注
3. 金额采用人民币（¥）格式
4. 已提交的历史数据显示实际金额
5. 可填报月份为金额输入框
6. 备注也为输入框
    - 列表样式示例：
            ## 机构A
            ### 部门1
            #### 项目分类1
            ##### 项目1

            | 子项目 | 资金需求类型 | 2024年汇总 | 2024-01 (已提交) | 2024-02 (已提交) | 2024-03 (已提交) | 2024-04 (可填报) | 备注 ｜
            |--------|------------|------------|----------------|----------------|----------------|----------------|----------------|
            | 子项目1 | 设备采购 | ¥1,000,000 | ¥200,000 | ¥300,000 | ¥200,000 | | |
            | 子项目1 | 工程款 | ¥2,000,000 | ¥400,000 | ¥600,000 | ¥500,000 | | |
            | 子项目2 | 材料费 | ¥500,000 | ¥100,000 | ¥150,000 | ¥100,000 | | |

#### 撤回项目重新填报页面     
- 标题：资金需求预测撤回项目填报
- 返回按钮：点击按钮返回资金需求预测填报项目列表页面
- 保存、提交按钮
- 子项目列表
    - 表格按机构、部门、项目分类和项目名称进行分组展示
    - 表头包含
        - 子项目
        - 资金需求类型
        - 年度汇总数据
        - 前3个月历史数据（不可编辑）
        - 下月数据（可填报）
        - 备注
3. 金额采用人民币（¥）格式
4. 已提交的历史数据显示实际金额
5. 可填报月份为金额输入框，默认展示之前填报金额
6. 备注也为输入框，默认展示之前备注内容
    - 列表样式示例：
            ## 机构A
            ### 部门1
            #### 项目分类1
            ##### 项目1

            | 子项目 | 资金需求类型 | 2024年汇总 | 2024-01 (已提交) | 2024-02 (已提交) | 2024-03 (已提交) | 2024-04 (可填报) | 备注 ｜
            |--------|------------|------------|----------------|----------------|----------------|----------------|----------------|
            | 子项目1 | 设备采购 | ¥1,000,000 | ¥200,000 | ¥300,000 | ¥200,000 || |
            | 子项目1 | 工程款 | ¥2,000,000 | ¥400,000 | ¥600,000 | ¥500,000 | | |
            | 子项目2 | 材料费 | ¥500,000 | ¥100,000 | ¥150,000 | ¥100,000 | | |

### 其他注意事项
- 尽量利用当前的设计和组件
- 组件尽量可以复用
- 利用hook优化页面代码
